#######################################################################
# This file is managed by salt. Manual changes risk being overwritten.
#######################################################################
{%- set ejabberd = pillar.get('ejabberd', {}) %}
loglevel: {{ ejabberd.loglevel }}

{% if ejabberd.watchdog_admins %}
watchdog_admins:
{% for admin in ejabberd.watchdog_admins %}
  - {{ admin }}
{% endfor %}
{% endif %}

{% if ejabberd.hosts %}
hosts:
{% for host in ejabberd.hosts %}
  - {{ host }}
{% endfor %}
{% endif %}

{% if ejabberd.route_subdomains %}
route_subdomains: {{ ejabberd.route_subdomains }}
{% endif %}

listen:
  {% for listen_item in ejabberd.listen -%}
  -
    {%- for key,value in listen_item|dictsort %}
    {{ key }}: {{ value }}
  {% endfor %}
{% endfor %}
auth_method: {{ ejabberd.auth_method }}
acl:
{% for acl in ejabberd.acl %}
  {{ acl }}
{% endfor %}
access:
{% for access in ejabberd.access %}
  {{ access }}
{% endfor %}
modules:
{% for modules in ejabberd.modules %}
  {{ modules }}
{% endfor %}

### Local Variables:
### mode: yaml
### End:
### vim: set filetype=yaml tabstop=8
